<section id="container-3" class="container container-3 full-bleed" aria-label="About & How It Works">
  <div class="wrapper content-100">
    <div class="inner stack whoami-block center">

      <!-- Who am I -->
      <h2 class="whoami">Who am I?</h2>

      <!-- Blurb (desktop+mobile variants handled inside) -->
      <!-- Uses your #gs-blurb styles from styles.css -->
      <div id="gs-blurb" style="
        margin:auto;
        font-family:'SF Pro Display', -apple-system, BlinkMacSystemFont,
        'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        font-weight:400; font-size:1.125rem; line-height:1.125; letter-spacing:0;
        color:#8a8a8a; text-align:center; max-width:57%;">
        <span class="mobile-only">
          My name is Gabriel Santana. I'm a 16-year-old running an online video editing business based in Brazil.
        </span>
        <span class="desktop-only">
          My name is Gabriel Santana. I'm a 16-year-old running an online video editing business based in Brazil.
          My goal is <em>simple</em>: make video editing so frictionless that it <strong>never even crosses your mind.</strong>
        </span>
      </div>
      <style>
        @media (max-width: 768px){ #gs-blurb{ max-width:90% !important; margin-top:10px !important; } #gs-blurb .desktop-only{ display:none; } }
        @media (min-width: 769px){ #gs-blurb .mobile-only{ display:none; } }
      </style>

      <!-- (Optional) mobile-only goal line -->
      <div id="gs-blurb-mobile" style="
        display:none; margin:auto; margin-bottom:50px;
        font-family:'SF Pro Display', -apple-system, BlinkMacSystemFont,'Segoe UI', Roboto,'Helvetica Neue', Arial, sans-serif;
        font-weight:400; font-size:0.9rem; line-height:1.125; letter-spacing:0; color:#8a8a8a; text-align:center; max-width:57%;">
        My goal is <em>simple</em>: make video editing so frictionless that it <strong>never even crosses your mind.</strong>
      </div>
      <style>
        @media (max-width: 768px){ #gs-blurb-mobile{ max-width:90% !important; margin-top:10px !important; display:block !important; } }
        @media (min-width: 769px){ #gs-blurb-mobile{ display:none !important; } }
      </style>

      <!-- Mobile-only faded divider -->
      <style>
        #mobile-fade-divider{ display:block; width:85%; height:1px; margin:24px auto 55px;
          background:linear-gradient(90deg,rgba(225,230,236,0) 0%,#e1e6ec 20%,#e1e6ec 80%,rgba(225,230,236,0) 100%);}
        @media (min-width: 768px){ #mobile-fade-divider{ display:none !important; } }
      </style>
      <div id="mobile-fade-divider" role="separator" aria-hidden="true"></div>

      <!-- Life Pictures: slideshow -->
      <style>
        *,*::before,*::after{ box-sizing:border-box; }
        .slideshow-wrapper{ all:initial; display:flex; justify-content:center; width:100%; margin:30px auto 190px; }
        .slideshow-frame{ width:100%; display:flex; justify-content:center; }
        @media (max-width:600px){ .slideshow-wrapper{ margin:30px auto; }
          .slideshow-frame{ padding-left:calc(clamp(12px,6vw,24px) + env(safe-area-inset-left));
            padding-right:calc(clamp(12px,6vw,24px) + env(safe-area-inset-right)); overflow:hidden; } }
        .slideshow-container{ position:relative; width:100%; max-width:700px; aspect-ratio:16/9; display:flex;
          justify-content:center; align-items:center; overflow:visible; user-select:none; -webkit-user-select:none;
          -webkit-touch-callout:none; touch-action:pan-y; }
        .slide-track{ position:relative; width:100%; height:100%; pointer-events:none; }
        .slide{ position:absolute; inset:0; background-position:center; background-size:cover; opacity:0; transform:scale(.5);
          filter:blur(4px); transition:all .6s ease-in-out; pointer-events:none; }
        .slide.active{ opacity:1; transform:scale(1); filter:none; z-index:2; }
        .slide.left{ opacity:.6; z-index:1; transform:translateX(-40%) scale(.6); }
        .slide.right{ opacity:.6; z-index:1; transform:translateX(40%) scale(.6); }
        .arrow{ position:absolute; top:50%; transform:translateY(-50%); font-size:30px; color:white; background:none; border:none;
          cursor:pointer; z-index:9999; pointer-events:auto; user-select:none; -webkit-user-select:none; outline:none;
          -webkit-tap-highlight-color:transparent; touch-action:manipulation; transition:transform .15s ease; }
        .arrow:active{ transform:translateY(-50%) scale(.85); }
        .arrow-left{ left:clamp(10px,3vw,40px); } .arrow-right{ right:clamp(10px,3vw,40px); }
        .protect-guard{ position:absolute; inset:0; z-index:3; background:transparent; pointer-events:none; }
        .slideshow-container, .slideshow-container *{ user-select:none; -webkit-user-select:none; }
        @media (max-width:600px){ .slide.left{ transform:translateX(-30%) scale(.82); opacity:.6; z-index:1; }
          .slide.right{ transform:translateX(30%) scale(.82); opacity:.6; z-index:1; }
          .arrow{ font-size:24px; } .arrow-left{ left:clamp(6px,3vw,16px); } .arrow-right{ right:clamp(6px,3vw,16px); } }
      </style>
      <div class="slideshow-wrapper">
        <div class="slideshow-frame">
          <div class="slideshow-container" id="slideshow">
            <button type="button" class="arrow arrow-left" aria-label="Previous">&#10094;</button>
            <div class="slide-track" id="slideTrack"></div>
            <button type="button" class="arrow arrow-right" aria-label="Next">&#10095;</button>
            <div class="protect-guard" aria-hidden="true"></div>
          </div>
        </div>
      </div>
      <script>
        (function(){
          const IMAGE_URLS=[
            "https://i.imgur.com/M3iYH0R.jpeg",
            "https://i.imgur.com/iTgs8Nm.jpeg",
            "https://i.imgur.com/xqhNrMc.jpeg",
            "https://i.imgur.com/JIZwpKT.jpeg",
            "https://i.imgur.com/kYj36ZY.jpeg",
          ];
          const track=document.getElementById("slideTrack");
          const slideshow=document.getElementById("slideshow");
          const slides=[];
          IMAGE_URLS.forEach(url=>{ const d=document.createElement("div"); d.className="slide"; track.appendChild(d); slides.push(d); });
          requestAnimationFrame(()=>{ slides.forEach((el,i)=>{ el.style.backgroundImage=`url("${IMAGE_URLS[i]}")`; }); });
          let current=0, autoplayTimer=null; const interval=7000;
          function update(){ slides.forEach((s,i)=>{ s.classList.remove("active","left","right");
            if(i===current) s.classList.add("active");
            else if(i===(current+1)%slides.length) s.classList.add("right");
            else if(i===(current-1+slides.length)%slides.length) s.classList.add("left"); }); }
          function move(dir){ current=(current+dir+slides.length)%slides.length; update(); }
          function manual(dir){ move(dir); reset(); }
          function reset(){ clearInterval(autoplayTimer); autoplayTimer=setInterval(()=>move(1), interval); }
          document.querySelector(".arrow-left").addEventListener("click", ()=>manual(-1));
          document.querySelector(".arrow-right").addEventListener("click", ()=>manual(1));
          let sx=0, ex=0;
          slideshow.addEventListener("touchstart", e=>{ sx=e.changedTouches[0].screenX; }, {passive:true});
          slideshow.addEventListener("touchend", e=>{ ex=e.changedTouches[0].screenX; const d=sx-ex; if(Math.abs(d)>=50) manual(d>0?1:-1); }, {passive:true});
          ["contextmenu","copy","cut"].forEach(evt=>slideshow.addEventListener(evt, e=>e.preventDefault()));
          slideshow.addEventListener("dragstart", e=>e.preventDefault());
          document.addEventListener("keydown", e=>{ if((e.ctrlKey||e.metaKey)&&["s","u","p"].includes(e.key.toLowerCase())) e.preventDefault(); });
          let pressTimer; slideshow.addEventListener("touchstart", ()=>{ pressTimer=setTimeout(()=>{},600); }, {passive:true});
          slideshow.addEventListener("touchend", ()=>clearTimeout(pressTimer), {passive:true});
          update(); reset();
        })();
      </script>

      <!-- Section: How it works -->
      <div class="responsive-text"><span>Here's what working with me looks like:</span></div>
      <style>
        .responsive-text{ margin:auto; font-family:'SF Pro Display', -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;
          font-weight:300; font-size:2.625rem; line-height:1.125; letter-spacing:-0.1rem; color:#E1E6EC; text-align:center; max-width:100%; }
        @media (max-width:768px){ .responsive-text{ font-size:2.1rem; line-height:1.05; margin-bottom:10px; }
          .responsive-text::before{ content:"Here’s how I work with you:"; display:block; } .responsive-text span{ display:none; } }
      </style>

      <!-- Desktop helper line (hidden on mobile) -->
      <div id="hero-blurb" style="
        margin:auto; display:block; font-family:'SF Pro Display', -apple-system, BlinkMacSystemFont,'Segoe UI', Roboto,'Helvetica Neue', Arial, sans-serif;
        font-weight:400; font-size:1.125rem; line-height:1.3; letter-spacing:0; color:#8a8a8a; text-align:center; max-width:57%; box-sizing:border-box;">
        The exact system I use daily to produce client content with minimal input from them.
      </div>
      <style>@media (max-width:768px){ #hero-blurb{ display:none !important; } }</style>

      <!-- Desktop/tablet flow -->
      <style>@media (max-width:767px){ #steps-flow{ display:none !important; } }</style>
      <div id="steps-flow" style="
        display:flex; flex-wrap:wrap; align-items:center; justify-content:center; gap:8px;
        font-family:'SF Pro Display', -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;
        margin-bottom:48px; font-size:.75em; user-select:none;">
        <div onmouseover="this.style.boxShadow='0 0 6px rgba(255,255,255,0.04), 0 0 12px rgba(255,255,255,0.02)'; this.style.borderColor='#ffffff33';"
             onmouseout="this.style.boxShadow='0 1px 5px rgba(0,0,0,0.1)'; this.style.borderColor='#0C0C0C';"
             style="flex:1; min-width:160px; max-width:200px; background:#00000091; border:1px solid #0C0C0C; border-radius:6px; padding:12px; color:white; box-shadow:0 1px 5px rgba(0,0,0,0.1); transition:all .3s ease;">
          <h3 style="margin-top:0; margin-bottom:8px; font-size:1.05em; font-weight:700;">Step 1: Alignment</h3>
          <p style="margin:0; color:#ccc; font-weight:400;">We start with a deep alignment call to align with your voice + set up all technical details.</p>
        </div>
        <div style="font-size:18px; color:white; align-self:center;">➔</div>
        <div style="flex:0 0 160px; max-width:180px; background:#1a1a1a; border:1px solid #333; border-radius:6px; padding:10px; color:#ddd; font-style:italic; box-shadow:0 1px 4px rgba(0,0,0,0.15);">
          <p style="margin:0; font-weight:400;">I’m notified when a new file is added to the shared folder.<span style="color:#aaa;"> No messages needed.</span></p>
        </div>
        <div style="font-size:18px; color:white; align-self:center;">➔</div>
        <div onmouseover="this.style.boxShadow='0 0 6px rgba(255,255,255,0.04), 0 0 12px rgba(255,255,255,0.02)'; this.style.borderColor='#ffffff33';"
             onmouseout="this.style.boxShadow='0 1px 5px rgba(0,0,0,0.1)'; this.style.borderColor='#0C0C0C';"
             style="flex:1; min-width:160px; max-width:200px; background:#00000091; border:1px solid #0C0C0C; border-radius:6px; padding:12px; color:white; box-shadow:0 1px 5px rgba(0,0,0,0.1); transition:all .3s ease;">
          <h3 style="margin-top:0; margin-bottom:8px; font-size:1.05em; font-weight:700;">Step 2: Execution</h3>
          <p style="margin:0; color:#ccc; font-weight:400;">I create the video based on the vision from our alignment call, ensuring it matches your goals and minimizes revisions.</p>
        </div>
        <div style="font-size:18px; color:white; align-self:center;">➔</div>
        <div style="flex:0 0 160px; max-width:180px; background:#1a1a1a; border:1px solid #333; border-radius:6px; padding:10px; color:#ddd; font-style:italic; box-shadow:0 1px 4px rgba(0,0,0,0.15);">
          <p style="margin:0; font-weight:400;">Final video is uploaded to the shared folder.</p>
        </div>
        <div style="font-size:18px; color:white; align-self:center;">➔</div>
        <div onmouseover="this.style.boxShadow='0 0 6px rgba(255,255,255,0.04), 0 0 12px rgba(255,255,255,0.02)'; this.style.borderColor='#ffffff33';"
             onmouseout="this.style.boxShadow='0 1px 5px rgba(0,0,0,0.1)'; this.style.borderColor='#0C0C0C';"
             style="flex:1; min-width:160px; max-width:200px; background:#00000091; border:1px solid #0C0C0C; border-radius:6px; padding:12px; color:white; box-shadow:0 1px 5px rgba(0,0,0,0.1); transition:all .3s ease;">
          <h3 style="margin-top:0; margin-bottom:8px; font-size:1.05em; font-weight:700;">Step 3: Delivery</h3>
          <p style="margin:0; color:#ccc; font-weight:400;">You review it. If aligns with your vision, you upload it. Revisions are rare, though.</p>
        </div>
      </div>

      <!-- Desktop-only dashboard note -->
      <style>@media (max-width:767px){ #no-select{ display:none !important; } }</style>
      <div id="no-select" style="
        display:flex; flex-direction:column; align-items:center;
        font-family:'SF Pro Display', -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;
        font-size:.65em; margin-bottom:3px; margin-top:18px; user-select:none;">
        <div style="max-width:300px; background:rgba(30,30,30,.7); border:1px solid rgba(255,255,255,.05); border-radius:8px; padding:8px 14px;
          color:#e1e6ec; font-style:italic; box-shadow:0 0 8px rgba(255,255,255,.05); backdrop-filter:blur(5px); text-align:center;">
          <p style="margin:0; font-weight:400;">
            <span style="font-family:monospace;">✨</span>
            You'll get access to a <strong style="font-weight:600;">private dashboard</strong>
            with step-by-step project tracking. Rough cuts, music, asset gathering, final touches. Updates in real time, no need to ask about project status.
          </p>
        </div>
        <div style="font-size:13px; color:#e1e6ec; margin-top:6px; opacity:.6;">↑</div>
      </div>
      <script>
        (function(){ const el=document.getElementById("no-select"); if(!el) return;
          el.addEventListener("contextmenu", e=>e.preventDefault()); el.addEventListener("selectstart", e=>e.preventDefault()); })();
      </script>

      <!-- Mobile: interactive flow -->
      <style>
        #steps-flow-mobile{ display:none; }
        @media (max-width:767.98px){
          #steps-flow-mobile, #steps-flow-mobile *{ box-sizing:border-box; }
          #steps-flow-mobile{ display:flex; flex-direction:column; align-items:center;
            font-family:'SF Pro Display', -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;
            margin-bottom:48px; font-size:1.1em; user-select:none; -webkit-user-select:none; -webkit-touch-callout:none; -webkit-tap-highlight-color:transparent; }
          .step-box{ width:100%; max-width:320px; background:#00000091; border:1px solid #0C0C0C; border-radius:6px; padding:12px; color:white;
            box-shadow:0 1px 5px rgba(0,0,0,.1); transition: box-shadow .3s ease, border-color .3s ease; }
          .step-box:hover{ box-shadow:0 0 6px rgba(255,255,255,.04), 0 0 12px rgba(255,255,255,.02); border-color:#ffffff33; }
          .note-box{ width:100%; max-width:280px; background:#1a1a1a; border:1px solid #333; border-radius:6px; padding:10px; color:#ddd; font-style:italic; box-shadow:0 1px 4px rgba(0,0,0,.15); }
          .arrow-down{ font-size:14px; color:white; margin:8px 0; line-height:1; user-select:none; -webkit-user-select:none; -webkit-touch-callout:none; -webkit-tap-highlight-color:transparent; }
          .step-2-wrapper{ display:flex; gap:6px; width:100%; max-width:320px; }
          .step-2-left,.step-2-right{ min-width:0; }
          .step-2-left{ flex:0 0 calc(80% - 3px); transition:flex-basis 260ms ease; overflow:hidden; position:relative; }
          .step-2-right{ flex:0 0 calc(20% - 3px); transition:flex-basis 260ms ease; }
          .step-2-wrapper.expanding .step-2-left, .step-2-wrapper.expanded .step-2-left{ flex-basis:calc(20% - 3px); }
          .step-2-wrapper.expanding .step-2-right, .step-2-wrapper.expanded .step-2-right{ flex-basis:calc(80% - 3px); }
          .step-2-wrapper.expanded .step-2-right{ pointer-events:none; cursor:default; }
          .step-2-content{ opacity:1; transform:translateY(0); transition:opacity 220ms ease, transform 240ms ease, max-height 220ms ease; }
          .step-2-content.revealing{ opacity:0; transform:translateY(6px); }
          .step-2-plus{ position:absolute; inset:0; display:flex; align-items:center; justify-content:center; opacity:0; transform:scale(.9);
            transition:opacity 200ms ease, transform 220ms ease; background:none; border:none; color:inherit; cursor:pointer; pointer-events:none; }
          .step-2-wrapper.expanding .step-2-content{ opacity:0; transform:translateY(4px); max-height:0; transition:none; }
          .step-2-wrapper.expanding .step-2-plus{ opacity:1; transform:none; pointer-events:auto; transition:none; }
          .step-2-wrapper.expanded .step-2-plus, .step-2-wrapper.collapsing .step-2-plus{ pointer-events:auto; }
          .step-2-wrapper.expanded .step-2-content{ opacity:0; transform:translateY(6px); max-height:0; }
          .step-2-wrapper.expanded .step-2-plus{ opacity:1; transform:scale(1); }
          .step-2-wrapper.collapsing .step-2-content{ opacity:0; transform:translateY(6px); max-height:0; }
          .step-2-wrapper.collapsing .step-2-plus{ opacity:1; transform:scale(1); }
          @keyframes rotateGradient{ 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }
          .step-2-right.extra-box{ box-shadow:inset 0 0 0 1px rgba(255,255,255,.12), 0 2px 6px rgba(0,0,0,.35);
            border-radius:10px; padding:12px; color:#e1e6ec; font-size:.8em; background:linear-gradient(120deg, rgba(28,28,28,.94), rgba(0,0,0,.9));
            background-size:200% 200%; animation:rotateGradient 30s ease infinite; cursor:pointer; position:relative; overflow:hidden; display:block; }
          .diamond-icon,.reveal-content{ transition:opacity 220ms ease, transform 240ms ease; }
          .diamond-icon{ position:absolute; inset:0; display:flex; align-items:center; justify-content:center; pointer-events:none; opacity:1; }
          .step-2-wrapper.expanding .diamond-icon{ opacity:1; } .step-2-wrapper.expanded .diamond-icon{ opacity:0; }
          .reveal-content{ position:static; opacity:0; transform:translateY(6px); white-space:normal; overflow-wrap:anywhere; word-break:break-word; display:none; }
          .step-2-wrapper.expanded .reveal-content{ opacity:1; transform:translateY(0); padding-top:5px; padding-bottom:4px; }
          .step-2-wrapper.expanding .reveal-content, .step-2-wrapper.collapsing .reveal-content, .step-2-wrapper:not(.expanded) .reveal-content{ display:none; }
          .reveal-content p{ margin:0; font-weight:400; font-size:1.08em; line-height:1.55; }
        }
      </style>
      <div id="steps-flow-mobile" aria-live="polite">
        <div class="step-box">
          <h3 style="margin-top:0; margin-bottom:8px; font-size:1.05em; font-weight:700;">Step 1: Alignment</h3>
          <p style="margin:0; color:#ccc; font-weight:400;">We start with a deep alignment call to align with your voice + set up all technical details.</p>
        </div>
        <div class="arrow-down">↓</div>
        <div class="note-box"><p style="margin:0; font-weight:400;">I’m notified when a new file is added to the shared folder.<span style="color:#aaa;"> No messages needed.</span></p></div>
        <div class="arrow-down">↓</div>
        <div class="step-2-wrapper" id="step2wrap" aria-live="polite">
          <div class="step-box step-2-left" id="step2left">
            <div class="step-2-content" id="step2text">
              <h3 style="margin-top:0; margin-bottom:8px; font-size:1.05em; font-weight:700;">Step 2: Execution</h3>
              <p style="margin:0; color:#ccc; font-weight:400;">I create the video based on the vision from our alignment call, ensuring it matches your goals and minimizes revisions.</p>
            </div>
            <button class="step-2-plus" id="collapseBtn" aria-label="Collapse details">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                   stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14M5 12h14"/></svg>
            </button>
          </div>
          <div class="step-2-right extra-box" id="diamondBox" role="button" aria-expanded="false" aria-controls="step2left">
            <div class="diamond-icon" aria-hidden="true">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                   fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon-diamond">
                <path d="M6 3h12l3 5-9 13L3 8l3-5z"/><path d="M3 8h18"/><path d="M12 3l-2 5 2 13 2-13-2-5z"/>
              </svg>
            </div>
            <div class="reveal-content" id="revealText" aria-hidden="true">
              <h3 style="margin-top:0; margin-bottom:8px; font-size:1.14em; font-weight:700;">Step 2.1: Progress Monitor</h3>
              <p style="margin:0; font-weight:400; color:#ccc; font-size:1.10em; line-height:1.55;">
                You’ll get access to a <strong style="font-weight:600;">private dashboard</strong>
                with step-by-step project tracking. Rough cuts, music, asset gathering, final touches.
                Updates in real time, no need to ask about project status.
              </p>
            </div>
          </div>
        </div>
        <div class="arrow-down">↓</div>
        <div class="note-box"><p style="margin:0; font-weight:400;">Final video is uploaded to the shared folder.</p></div>
        <div class="arrow-down">↓</div>
        <div class="step-box">
          <h3 style="margin-top:0; margin-bottom:8px; font-size:1.05em; font-weight:700;">Step 3: Delivery</h3>
          <p style="margin:0; color:#ccc; font-weight:400;">You review it. If aligns with your vision, you upload it. Revisions are rare, though.</p>
        </div>
      </div>
      <script>
        (function(){
          var wrap=document.getElementById('step2wrap'); if(!wrap) return;
          var diamond=document.getElementById('diamondBox'); var collapseBtn=document.getElementById('collapseBtn');
          var revealText=document.getElementById('revealText'); var step2text=document.getElementById('step2text');
          function lockH(){ var h=wrap.getBoundingClientRect().height; wrap.style.height=h+'px'; wrap.style.overflow='hidden'; }
          function unlockH(){ wrap.style.height=''; wrap.style.overflow=''; }
          function expand(){
            if(wrap.classList.contains('expanded')||wrap.classList.contains('expanding')) return;
            lockH(); revealText.style.display='none'; revealText.setAttribute('aria-hidden','true'); step2text.style.display='none';
            wrap.classList.add('expanding'); diamond.setAttribute('aria-expanded','true'); diamond.setAttribute('aria-disabled','true');
            var onEnd=function(e){ if(e.propertyName!=='flex-basis') return; wrap.removeEventListener('transitionend', onEnd, true);
              wrap.classList.remove('expanding'); revealText.style.display='block'; revealText.setAttribute('aria-hidden','false');
              void revealText.offsetWidth; wrap.classList.add('expanded'); requestAnimationFrame(unlockH); };
            wrap.addEventListener('transitionend', onEnd, true);
          }
          function collapse(){
            if(!wrap.classList.contains('expanded')) return;
            lockH(); revealText.style.display='none'; revealText.setAttribute('aria-hidden','true');
            wrap.classList.remove('expanded'); wrap.classList.add('collapsing'); diamond.setAttribute('aria-expanded','false'); diamond.removeAttribute('aria-disabled');
            var timer=setTimeout(cleanup, 360);
            function cleanupNow(e){ if(e.propertyName!=='flex-basis') return; cleanup(); }
            function cleanup(){ clearTimeout(timer); wrap.removeEventListener('transitionend', cleanupNow, true); wrap.classList.remove('collapsing');
              step2text.style.display='block'; step2text.classList.add('revealing'); void step2text.offsetWidth; step2text.classList.remove('revealing'); unlockH(); }
            wrap.addEventListener('transitionend', cleanupNow, true);
          }
          diamond.addEventListener('click', function(){ if(wrap.classList.contains('expanded')) return; expand(); });
          collapseBtn.addEventListener('click', function(e){ if(!wrap.classList.contains('expanded')) return; e.stopPropagation(); collapse(); });
          collapseBtn.addEventListener('keydown', function(e){ if(!wrap.classList.contains('expanded')) return; if(e.key==='Enter'||e.key===' '){ e.preventDefault(); collapse(); } });
        })();
      </script>

    </div>
  </div>
</section>
